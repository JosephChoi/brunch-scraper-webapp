# 구현 로드맵 (Implementation Roadmap)
## Brunch Text Scraper

### 📋 개요

브런치 텍스트 수집기 프로젝트의 단계별 구현 계획 및 진행 상황 추적 문서입니다.

---

## 🚀 전체 일정 개요

- **Phase 1**: 프로젝트 기초 설정 (1주차)
- **Phase 2**: 핵심 스크래핑 기능 구현 (1-2주차)  
- **Phase 3**: 통합 및 사용자 경험 개선 (1주차)
- **Phase 4**: 테스트, 최적화 및 배포 (1주차)

**총 예상 기간**: 4-5주

---

## 📅 Phase 1: 프로젝트 기초 설정 (1주차)

### 1.1 개발 환경 설정
- [x] Playwright 1.55.0+ 설치 및 브라우저 다운로드
- [x] package.json 의존성 확인 및 업데이트
- [x] TypeScript 설정 검증 (tsconfig.json)
- [x] Tailwind CSS 설정 확인 및 커스터마이징
- [x] ESLint 규칙 적용 및 코드 품질 설정

### 1.2 프로젝트 구조 구성
- [x] src/components/ 디렉토리 생성
- [x] src/components/ui/ 기본 UI 컴포넌트 폴더 생성
- [x] src/lib/ 비즈니스 로직 폴더 생성
- [x] src/hooks/ React 커스텀 훅 폴더 생성
- [x] 프로젝트 구조 문서화

### 1.3 TypeScript 타입 시스템 구축
- [x] src/lib/types.ts 파일 생성
- [x] ScrapeRequest 인터페이스 정의
- [x] ScrapeConfig 인터페이스 정의  
- [x] ScrapeResult 인터페이스 정의
- [x] ProgressResponse 인터페이스 정의
- [x] CompleteResponse 인터페이스 정의
- [x] ErrorResponse 인터페이스 정의
- [x] ValidationResult 인터페이스 정의
- [x] ProcessedText 인터페이스 정의

### 1.4 기본 UI 컴포넌트 개발
- [x] ScrapeForm.tsx 컴포넌트 생성
  - [x] URL 입력 필드
  - [x] 시작/종료 번호 입력 필드
  - [x] 폼 검증 및 제출 로직
- [x] ProgressBar.tsx 컴포넌트 생성
  - [x] 진행률 시각화
  - [x] 현재 상태 표시
  - [x] 애니메이션 효과
- [x] DownloadButton.tsx 컴포넌트 생성
  - [x] 다운로드 버튼 UI
  - [x] 파일 생성 및 다운로드 로직
- [x] 기본 레이아웃 및 스타일링 완성
- [x] 반응형 디자인 구현 (모바일/데스크탑)

---

## 🔧 Phase 2: 핵심 스크래핑 기능 구현 (1-2주차)

### 2.1 입력값 검증 시스템
- [x] src/lib/validator.ts 파일 생성
- [x] 브런치 URL 패턴 검증 함수 구현
  - [x] 정규식: `/^https:\/\/brunch\.co\.kr\/@[a-zA-Z0-9_-]+\/\d+$/`
  - [x] 작가 ID 추출 로직
  - [x] 기본 URL 파싱
- [x] 번호 범위 검증 함수 구현
  - [x] 1 ≤ startNum ≤ endNum 검증
  - [x] 양의 정수 검증
  - [x] 최대 100개 제한 검증
- [x] XSS 방지 입력값 이스케이프 처리
- [x] 검증 에러 메시지 다국어 지원

### 2.2 Playwright 스크래핑 엔진
- [x] src/lib/scraper.ts 파일 생성
- [x] Playwright 기본 설정
  - [x] Chromium 브라우저 인스턴스 생성
  - [x] User-Agent 및 헤더 설정
  - [x] 타임아웃 설정 (30초)
- [x] 페이지 스크래핑 로직 구현
  - [x] 동적 콘텐츠 로딩 대기
  - [x] 글 제목 추출 로직
  - [x] 본문 내용 추출 로직
  - [x] 이미지/광고 제외 처리
- [x] 에러 처리 구현
  - [x] 404 페이지 감지
  - [x] 네트워크 타임아웃 처리
  - [x] 브런치 서버 오류 처리
- [x] 요청 간격 제어 (2-3초 딜레이)
- [x] 브라우저 리소스 관리 및 정리

### 2.3 텍스트 처리 엔진
- [x] src/lib/textProcessor.ts 파일 생성
- [x] HTML 태그 제거 함수 구현
- [x] 불필요한 공백/개행 정리 로직
- [x] 글 간 구분자 추가 ("---" 또는 사용자 정의)
- [x] 파일명 생성 로직
  - [x] 패턴: `brunch_작가ID_시작-종료_날짜.txt`
  - [x] 특수문자 처리
  - [x] 날짜 포맷팅
- [x] 메타데이터 생성
  - [x] 성공/실패 통계
  - [x] 수집 시간 기록
  - [x] 건너뛴 URL 목록

### 2.4 스트리밍 API Route 구현
- [x] src/app/api/scrape/route.ts 파일 생성
- [x] POST 요청 핸들러 구현
- [x] 요청 본문 검증 로직
- [x] Server-Sent Events 스트리밍 설정
  - [x] 적절한 HTTP 헤더 설정
  - [x] CORS 설정 (필요시)
  - [x] Content-Type: text/event-stream
- [x] 실시간 진행 상황 전송
  - [x] progress 타입 응답 구현
  - [x] 현재/전체 진행률 전송
  - [x] 현재 처리 중인 URL 정보
- [x] 최종 결과 전송
  - [x] complete 타입 응답 구현
  - [x] 통합된 텍스트 데이터
  - [x] 메타데이터 포함
- [x] 에러 응답 처리
  - [x] error 타입 응답 구현
  - [x] 상세 에러 정보 제공
  - [x] HTTP 상태 코드 적절히 설정

---

## 🎯 Phase 3: 통합 및 사용자 경험 개선 (1주차)

### 3.1 상태 관리 훅 개발
- [x] src/hooks/useBrunchScraper.ts 파일 생성
- [x] 스크래핑 상태 관리
  - [x] idle, running, completed, error 상태
  - [x] 상태 전환 로직
  - [x] 상태별 UI 제어
- [x] 실시간 진행률 업데이트 로직
- [x] 에러 상태 관리 및 재시도 로직
- [x] 결과 데이터 캐싱 및 관리
- [x] 스크래핑 중단 기능 (optional)

### 3.2 실시간 업데이트 구현
- [ ] EventSource API 연동
  - [ ] 서버 연결 관리
  - [ ] 메시지 파싱 로직
  - [ ] 연결 끊김 감지
- [ ] 자동 재연결 로직 구현
- [ ] 브라우저 호환성 확보
  - [ ] 폴리필 적용 (필요시)
  - [ ] 구형 브라우저 대응
- [ ] 연결 상태 UI 표시

### 3.3 파일 다운로드 시스템
- [ ] 클라이언트사이드 파일 생성 로직
  - [ ] Blob API 활용
  - [ ] UTF-8 인코딩 보장
  - [ ] 메모리 효율성 고려
- [ ] 자동 다운로드 기능
  - [ ] 브라우저별 호환성 확보
  - [ ] 파일명 자동 설정
  - [ ] 다운로드 진행 상황 표시
- [ ] 다운로드 이력 관리 (optional)

### 3.4 포괄적인 에러 처리
- [ ] 네트워크 오류 처리
  - [ ] 연결 실패 감지
  - [ ] 타임아웃 처리
  - [ ] 재시도 로직
- [ ] 브런치 서버 오류 처리
  - [ ] 5xx 에러 감지
  - [ ] 서비스 점검 감지
  - [ ] 대체 로직 제공
- [ ] 사용자 친화적 에러 메시지
  - [ ] 에러 타입별 메시지 커스터마이징
  - [ ] 해결 방법 제시
  - [ ] 고객 지원 연락처 제공
- [ ] 부분 실패 처리
  - [ ] 수집된 데이터 보존
  - [ ] 실패한 URL 목록 제공
  - [ ] 재시도 옵션 제공

---

## 🧪 Phase 4: 테스트, 최적화 및 배포 (1주차)

### 4.1 성능 최적화
- [ ] 메모리 최적화
  - [ ] 브라우저 인스턴스 재사용
  - [ ] 가비지 컬렉션 최적화
  - [ ] 메모리 누수 방지
- [ ] 처리 속도 최적화
  - [ ] 병렬 처리 검토 (서버 부하 고려)
  - [ ] 캐싱 전략 구현
  - [ ] 불필요한 DOM 조작 최소화
- [ ] 대용량 데이터 처리
  - [ ] 스트리밍 처리 최적화
  - [ ] 청크 단위 처리
  - [ ] 진행률 업데이트 최적화

### 4.2 보안 강화
- [ ] Rate Limiting 구현
  - [ ] IP 기반 요청 제한 (분당 3회)
  - [ ] 429 에러 응답 구현
  - [ ] Retry-After 헤더 설정
  - [ ] 제한 상태 UI 표시
- [ ] 입력값 보안 강화
  - [ ] 서버사이드 재검증
  - [ ] XSS 방지 강화
  - [ ] CSRF 토큰 적용 (필요시)
- [ ] 로깅 보안
  - [ ] 민감 정보 로그 제외
  - [ ] 에러 로그 수집
  - [ ] 사용량 통계 수집

### 4.3 종합 테스트
- [ ] 단위 테스트 작성
  - [ ] validator.ts 함수 테스트
  - [ ] textProcessor.ts 함수 테스트
  - [ ] React 컴포넌트 테스트
- [ ] 통합 테스트 작성
  - [ ] API Route 테스트
  - [ ] 스크래핑 플로우 테스트
  - [ ] 에러 시나리오 테스트
- [ ] E2E 테스트 작성
  - [ ] 전체 사용자 플로우 테스트
  - [ ] 브라우저별 호환성 테스트
  - [ ] 모바일 반응형 테스트
- [ ] 성능 테스트
  - [ ] 최대 100개 글 수집 테스트
  - [ ] 메모리 사용량 모니터링
  - [ ] 응답 시간 측정

### 4.4 배포 및 운영 설정
- [ ] Vercel 배포 준비
  - [ ] 환경 변수 설정
  - [ ] 빌드 최적화 설정
  - [ ] 배포 스크립트 작성
- [ ] 프로덕션 환경 설정
  - [ ] CDN 설정
  - [ ] 캐싱 전략 적용
  - [ ] HTTPS 강제 적용
- [ ] 모니터링 설정
  - [ ] 에러 트래킹 (Sentry 등)
  - [ ] 성능 메트릭 수집
  - [ ] 사용량 분석 도구 연동
- [ ] 도메인 및 DNS 설정 (optional)

---

## 📚 추가 작업 항목

### 문서화 및 가이드
- [ ] 사용자 가이드 작성
  - [ ] 사용법 튜토리얼
  - [ ] 자주 묻는 질문 (FAQ)
  - [ ] 문제 해결 가이드
- [ ] 개발자 문서 작성
  - [ ] API 문서 업데이트
  - [ ] 코드 주석 작성
  - [ ] 아키텍처 다이어그램

### 법적/윤리적 준수
- [ ] 이용약관 페이지 작성
- [ ] 개인정보처리방침 작성 (필요시)
- [ ] 브런치 이용약관 준수 안내
- [ ] 책임 제한 안내문 작성

### 사용자 경험 개선
- [ ] 로딩 애니메이션 개선
- [ ] 키보드 단축키 지원
- [ ] 다크모드 지원 (optional)
- [ ] 다국어 지원 (optional)

---

## 📊 진행 상황 추적

### 전체 진행률
- **Phase 1**: ⬜ 0% (0/33 완료)
- **Phase 2**: ⬜ 0% (0/35 완료)  
- **Phase 3**: ⬜ 0% (0/21 완료)
- **Phase 4**: ⬜ 0% (0/28 완료)
- **추가 작업**: ⬜ 0% (0/14 완료)

**전체 진행률**: ⬜ 0% (0/131 완료)

### 주요 마일스톤
- [ ] 기본 프로젝트 구조 완성
- [ ] 스크래핑 엔진 동작 확인
- [ ] API 연동 및 실시간 업데이트 완성
- [ ] 파일 다운로드 기능 완성
- [ ] 전체 테스트 통과
- [ ] 프로덕션 배포 완료

---

## 🔄 업데이트 로그

| 날짜 | 내용 | 담당자 |
|------|------|--------|
| 2025-01-15 | 로드맵 초기 작성 | Joseph |
| | | |
| | | |

---

*이 문서는 프로젝트 진행에 따라 지속적으로 업데이트됩니다.*
*체크박스를 통해 실시간으로 진행 상황을 추적하고 관리할 수 있습니다.*
